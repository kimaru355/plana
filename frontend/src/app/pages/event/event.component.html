<section class="bg-white1 px-2 py-4 w-full" *ngIf="event">
  <div class="gap-4 grid grid-cols-2 w-full">
    <div class="w-full h-[50vh]">
      <img
        [src]="currentImageUrl"
        alt="{{ event.title }} image"
        class="bg-gray-300 rounded-xl w-full h-full object-cover"
      />
    </div>
    <div class="gap-2 grid grid-cols-2 grid-rows-2 w-full max-h-[50vh]">
      <div
        *ngFor="let imageUrl of event.images"
        class="bg-gray-300 rounded-xl w-full h-full"
      >
        <img
          src="{{ imageUrl }}"
          (click)="currentImageUrl = imageUrl"
          alt="{{ event.title }} image"
          class="rounded-xl w-full h-full cursor-pointer object-cover"
        />
      </div>
    </div>
  </div>
  <div class="bg-red-400 w-full h-96">
    <div
      id="popup-modal"
      tabindex="-1"
      class="top-0 right-0 left-0 z-50 fixed md:inset-0 justify-center items-center hidden w-full h-[calc(100%-1rem)] max-h-full overflow-x-hidden overflow-y-auto"
    >
      <div class="relative p-4 w-full max-w-md max-h-full">
        <div class="relative bg-white dark:bg-gray-700 shadow rounded-lg">
          <button
            type="button"
            class="inline-flex top-3 absolute justify-center items-center bg-transparent hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg w-8 h-8 text-gray-400 text-sm hover:text-gray-900 dark:hover:text-white end-2.5 ms-auto"
            data-modal-hide="popup-modal"
          >
            <svg
              class="w-3 h-3"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 14 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
              />
            </svg>
            <span class="sr-only">Close modal</span>
          </button>
          <div class="p-4 md:p-5 text-center">
            <svg
              class="mx-auto mb-4 w-12 h-12 text-gray-400 dark:text-gray-200"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 20 20"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
              />
            </svg>
            <h3
              class="mb-5 font-normal text-gray-500 text-lg dark:text-gray-400"
            >
              Are you sure you want to delete this product?
            </h3>
            <button
              data-modal-hide="popup-modal"
              type="button"
              class="inline-flex items-center bg-red-600 hover:bg-red-800 px-5 py-2.5 rounded-lg focus:ring-4 dark:focus:ring-red-800 text-white focus:outline-none focus:ring-red-300 font-medium text-center text-sm"
            >
              Yes, I'm sure
            </button>
            <button
              data-modal-hide="popup-modal"
              type="button"
              class="focus:z-10 border-gray-200 dark:border-gray-600 bg-white hover:bg-gray-100 dark:hover:bg-gray-700 dark:bg-gray-800 px-5 py-2.5 border rounded-lg focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 font-medium text-gray-900 text-sm ms-3 focus:outline-none hover:text-blue-700 dark:hover:text-white dark:text-gray-400"
            >
              No, cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="flex gap-2 px-8 pt-4">
    <div class="space-y-4 w-1/2">
      <div>
        <h2 class="font-bold text-2xl">{{ event.title }}</h2>
        <p>
          {{ event.location }},
          <span class="font-semibold">{{ event.city }}</span
          >, {{ event.country }}
        </p>
        <p>
          From:
          {{ event.startTime | date : "mediumDate" }}
          {{ event.startTime | date : "shortTime" }}
        </p>
        <p>
          To:
          {{ event.endTime | date : "mediumDate" }}
          {{ event.endTime | date : "shortTime" }}
        </p>
      </div>
      <div>
        <h3 class="font-semibold text-xl">Event Description</h3>
        <p>{{ event.description }}</p>
      </div>
    </div>
    <div
      class="flex flex-col gap-2 bg-white p-4 w-1/2 min-w-96 xl:min-w-[30rem]"
    >
      <h2 class="font-semibold text-2xl">Secure your seat</h2>
      <select
        name="ticketType"
        id="ticketType"
        class="border-2 border-gray-300 p-2 rounded-lg"
        [(ngModel)]="selectedTicketId"
        (change)="onTicketChange()"
      >
        <option *ngFor="let ticket of event.eventTickets" [value]="ticket.id">
          Name: {{ ticket.name }} - Type: {{ ticket.type }} - Price:
          {{ ticket.price | currency : "Ksh. " }}
        </option>
      </select>
      <div class="flex flex-col gap-2">
        <p>
          Ticket Name:
          <span class="font-semibold">{{ selectedTicket.name }}</span>
        </p>
        <p>
          Ticket Type:
          <span class="font-semibold">{{ selectedTicket.type }}</span>
        </p>
        <p>
          Number of people:
          <span class="font-semibold">{{ selectedTicket.persons }}</span>
        </p>

        <p>
          Ticket price:
          <span class="font-semibold">{{
            selectedTicket.price | currency : "Ksh. "
          }}</span>
        </p>
        <p>
          Tickets available:
          <span class="font-semibold">{{ selectedTicket.quantity }}</span>
        </p>
        <div class="flex justify-center items-center w-full">
          <div class="flex gap-2 shadow-lg p-1">
            <button
              type="button"
              class="flex justify-center items-center bg-red-400 rounded-lg w-10 h-10"
              (click)="decrement()"
            >
              <img src="/icons/minus.png" alt="subtract button" />
            </button>
            <p class="font-semibold text-2xl">{{ numberOfTickets }}</p>
            <button
              type="button"
              class="flex justify-center items-center bg-green-400 rounded-lg w-10 h-10"
              (click)="increment()"
            >
              <img src="/icons/add.png" alt="add button" />
            </button>
          </div>
        </div>
        <p>
          Total Price:
          <span class="font-semibold">{{
            numberOfTickets * selectedTicket.price | currency : "Ksh. "
          }}</span>
        </p>
        <div class="border-slate-400 p-2 border">
          <div class="flex gap-1 mb-2">
            <input
              type="text"
              name="name"
              id="name"
              placeholder="Enter name of attendee"
              class="border-2 border-gray-300 p-2 rounded-lg w-full"
              [(ngModel)]="inputName"
            />
            <button
              class="bg-blue px-4 py-2 rounded-lg text-white"
              (click)="addName()"
            >
              Add
            </button>
          </div>
          <div class="border-slate-400 border">
            <p class="bg-slate-200 w-full">
              Names (Max: {{ selectedTicket.persons * numberOfTickets }} )*
            </p>
            <p *ngFor="let name of names">{{ name }}</p>
          </div>
        </div>
        <button
          class="bg-blue px-12 py-4 rounded-3xl text-white"
          (click)="bookTicket()"
        >
          Reserve Now
        </button>
      </div>
    </div>
  </div>
</section>
